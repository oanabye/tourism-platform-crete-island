<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creta Beach Finder</title>

    <!-- Leaflet CSS for maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <!-- Navigation bar -->
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-anchor"></i> CRETA BEACH FINDER
        </div>
        <button id="logout-btn" class="floating-btn" style="display: none; padding: 8px 15px; font-size: 14px; background: rgba(255,255,255,0.2); color: white;">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </nav>

    <div id="main-container">

        <!-- Authentication container -->
        <div id="auth-container" class="glass-card">
            <div id="auth-section">
                <h3><i class="fas fa-user-lock"></i> Login</h3>
                <form id="login-form">
                    <input type="email" id="login-email" placeholder="Email" required />
                    <input type="password" id="login-password" placeholder="Password" required />
                    <button type="submit" class="btn-primary">Login</button>
                </form>
                <p>Don't have an account? <a href="#" id="show-register">Register</a></p>
            </div>

            <div id="register-section" style="display: none;">
                <h3><i class="fas fa-user-plus"></i> Register</h3>
                <form id="register-form">
                    <input type="email" id="register-email" placeholder="Email" required />
                    <input type="password" id="register-password" placeholder="Password" required />
                    <select id="register-role">
                        <option value="user">User</option>
                        <option value="admin">Administrator</option>
                    </select>
                    <button type="submit" class="btn-primary">Create Account</button>
                </form>
                <p>Already have an account? <a href="#" id="show-login">Login</a></p>
            </div>
        </div>

        <!-- Map and main interface -->
        <div id="map-wrapper" style="display: none;">

            <!-- User control buttons -->
            <div id="user-controls-overlay" style="position: absolute; top: 20px; left: 20px; z-index: 2000; display: flex; flex-direction: column; gap: 10px;">
                <button id="profile-btn" class="floating-btn">
                    <i class="fas fa-user-circle"></i> <span>My Account</span>
                </button>
                <button id="open-admin-btn" class="floating-btn" style="display: none;">
                    <i class="fas fa-user-shield"></i> <span>Admin</span>
                </button>
            </div>

            <!-- Map container -->
            <div id="map"></div>

            <!-- Nearby beaches panel -->
            <div id="results-panel" class="glass-card">
                <h4><i class="fas fa-umbrella-beach"></i> Nearby Beaches</h4>
                <ul id="beach-list"></ul>
            </div>

            <!-- Favorites modal -->
            <div id="favorites-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2><i class="fas fa-heart" style="color: #ff4757;"></i> My Favorites</h2>
                        <span class="close-modal">&times;</span>
                    </div>
                    <div id="user-info-display" style="padding: 10px; border-bottom: 1px solid #eee; color: #555; font-weight: bold;">
                        <i class="fas fa-user"></i> User: <span id="current-user-email">...</span>
                    </div>
                    <ul id="favorites-list"></ul>
                </div>
            </div>

            <!-- Reviews modal -->
            <div id="reviews-modal" class="modal">
                <div class="modal-content" style="width: 450px;">
                    <div class="modal-header">
                        <h2 id="review-beach-name">Reviews</h2>
                        <span class="close-reviews" style="cursor:pointer; font-size:1.5rem;">&times;</span>
                    </div>
                    <div id="reviews-container" style="max-height: 300px; overflow-y: auto; margin: 15px 0;"></div>
                    <hr>
                    <h4>Add Your Review</h4>
                    <form id="review-form">
                        <input type="hidden" id="review-beach-id">
                        <select id="review-rating" required>
                            <option value="5">⭐⭐⭐⭐⭐ (5/5)</option>
                            <option value="4">⭐⭐⭐⭐ (4/5)</option>
                            <option value="3">⭐⭐⭐ (3/5)</option>
                            <option value="2">⭐⭐ (2/5)</option>
                            <option value="1">⭐ (1/5)</option>
                        </select>
                        <textarea id="review-text" placeholder="Write your review..." required style="width:100%; border-radius:8px; padding:10px;"></textarea>
                        <button type="submit" class="btn-primary" style="margin-top:10px;">Post Review</button>
                    </form>
                </div>
            </div>

        </div>
    </div>

    <!-- Admin modal -->
    <div id="admin-modal" class="modal" style="display:none; z-index: 9999;">
        <div class="modal-content" style="max-width: 800px; max-height: 85vh; display: flex; flex-direction: column; overflow: hidden; padding: 0;">

            <div style="padding: 20px; border-bottom: 1px solid #eee;">
                <span class="close-admin" onclick="document.getElementById('admin-modal').style.display='none'" style="cursor:pointer; float:right; font-size:25px;">&times;</span>
                <h2 style="margin: 0;"><i class="fas fa-tools"></i> Admin Panel</h2>
            </div>

            <!-- Admin navigation -->
            <div class="admin-nav-buttons" style="display: flex; gap: 10px; padding: 15px 20px; background: rgba(0,0,0,0.05);">
                <button onclick="showAdminSection('users-section')" class="floating-btn" style="flex: 1; justify-content: center;">
                    <i class="fas fa-users"></i> Users
                </button>
                <button onclick="showAdminSection('beaches-section')" class="floating-btn" style="flex: 1; justify-content: center;">
                    <i class="fas fa-umbrella-beach"></i> Beaches
                </button>
            </div>

            <!-- Admin content -->
            <div style="overflow-y: auto; padding: 20px; flex-grow: 1;">
                <div id="users-section" class="admin-tab-content">
                    <h3>User List</h3>
                    <ul id="admin-users-list" style="list-style:none; padding:0;"></ul>
                </div>

                <div id="beaches-section" class="admin-tab-content" style="display: none;">
                    <h3>Add New Beach</h3>
                    <form id="admin-add-beach-form" style="display: flex; flex-direction: column; gap: 12px;">
                        <input type="text" id="admin-beach-name" placeholder="Beach Name" required style="padding: 10px;">
                        <div style="display: flex; gap: 10px;">
                            <input type="number" step="any" id="admin-beach-lat" placeholder="Latitude" required style="flex: 1; padding: 10px;">
                            <input type="number" step="any" id="admin-beach-lng" placeholder="Longitude" required style="flex: 1; padding: 10px;">
                        </div>
                        <input type="text" id="admin-beach-img" placeholder="Image URL" style="padding: 10px;">
                        <textarea id="admin-beach-desc" placeholder="Description..." rows="3" style="padding: 10px;"></textarea>

                        <button type="submit" class="btn-primary" style="background: #27ae60; padding: 15px; font-weight: bold;">
                            <i class="fas fa-plus-circle"></i> SAVE BEACH
                        </button>
                    </form>
                    <hr style="margin: 30px 0;">
                    <h3>Existing Beaches</h3>
                    <ul id="admin-beaches-list" style="list-style:none; padding:0; margin-bottom: 50px;"></ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="main.js"></script>
</body>

</html>